{"ast":null,"code":"import { DialogAuthenticationFailureComponent } from \"../../shared/dialog/dialog-alert/dialog-authentication-failure.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/_services/chat.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/_services/user.service\";\nimport * as i4 from \"@nebular/theme\";\nlet LoadingComponent = /*#__PURE__*/(() => {\n  class LoadingComponent {\n    constructor(chatService, router, userService, dialogService) {\n      this.chatService = chatService;\n      this.router = router;\n      this.userService = userService;\n      this.dialogService = dialogService;\n    }\n    ngOnInit() {\n      this.userService.fetchProfile().subscribe({\n        complete: () => {\n          this.chatService.updateFetch(10);\n        },\n        next: () => {\n          this.chatService.fetchFriends().subscribe({\n            complete: () => {\n              this.chatService.updateFetch(20);\n            },\n            next: () => {\n              this.chatService.fetchAllMessages().subscribe({\n                complete: () => {\n                  this.chatService.updateFetch(100);\n                },\n                error: e => {\n                  this.errorFetch(e);\n                }\n              });\n            },\n            error: e => {\n              this.errorFetch(e);\n            }\n          });\n        },\n        error: e => {\n          this.chatService.updateFetch(1);\n          this.errorFetch(e);\n        }\n      });\n    }\n    errorFetch(e) {\n      if (e.status === 401) {\n        this.dialogService.open(DialogAuthenticationFailureComponent, {\n          context: {\n            title: \"Authentication\",\n            message: 'Session Time Out'\n          }\n        }).onClose.subscribe(() => {});\n      } else {\n        console.log(e);\n      }\n    }\n  }\n  LoadingComponent.ɵfac = function LoadingComponent_Factory(t) {\n    return new (t || LoadingComponent)(i0.ɵɵdirectiveInject(i1.ChatService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.NbDialogService));\n  };\n  LoadingComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoadingComponent,\n    selectors: [[\"app-loading\"]],\n    decls: 14,\n    vars: 0,\n    consts: [[1, \"container\", \"h-100\"], [1, \"row\", \"h-100\", \"justify-content-center\", \"align-items-center\"], [1, \"col-lg-6\", \"col-md-8\", \"col-sm-10\", \"col-12\"], [1, \"text-center\"], [\"role\", \"status\", 1, \"spinner-border\", \"text-basic\", \"m-5\"]],\n    template: function LoadingComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"nb-card\", 3)(4, \"nb-card-header\")(5, \"h2\");\n        i0.ɵɵtext(6, \"Friends Chat\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"nb-card-body\");\n        i0.ɵɵelement(8, \"div\", 4);\n        i0.ɵɵelementStart(9, \"h5\");\n        i0.ɵɵtext(10, \"Loading your Content...\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"nb-card-footer\")(12, \"h6\");\n        i0.ɵɵtext(13, \"Powered By: Deepanshu Tyagi (Bang pt -God of Copy)\");\n        i0.ɵɵelementEnd()()()()()();\n      }\n    },\n    dependencies: [i4.NbCardComponent, i4.NbCardBodyComponent, i4.NbCardFooterComponent, i4.NbCardHeaderComponent]\n  });\n  return LoadingComponent;\n})();\nexport { LoadingComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}